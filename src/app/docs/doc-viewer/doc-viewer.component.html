<div class="doc-page" *ngIf="docContent">
  <h1 class="doc-title">{{ docContent.title }}</h1>
  <section class="doc-section">
    <h2>Description</h2>
    <p [innerHTML]="docContent.description"></p>
  </section>
  
  <section class="doc-section">
    <h2>Syntax</h2>
    <pre class="doc-syntax">{{ docContent.syntax }}</pre>
  </section>

  <section class="doc-section" *ngIf="docContent.parameters?.length">
    <h2>Parameters</h2>
    <table class="doc-table">
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Data Type</th>
          <th>Required</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let param of docContent.parameters">
          <td>{{ param.name }}</td>
          <td>{{ param.type }}</td>
          <td>{{ param.required }}</td>
          <td>{{ param.description }}</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="doc-section" *ngIf="docContent.examples?.length">
    <h2 *ngIf="(docContent.examples?.length || 0) === 1">Example</h2>
    <h2 *ngIf="(docContent.examples?.length || 0) > 1">Examples</h2>
    <div class="doc-example" *ngFor="let example of docContent.examples">
      <pre><code class="language-sql">{{ example }}</code></pre>
    </div>
  </section>

  <section class="doc-section" *ngIf="docContent.tips?.length">
    <h2>Tips</h2>
    <ng-container *ngTemplateOutlet="recursiveList; context:{ tips: docContent.tips }"></ng-container>
  </section>
  
  <ng-template #recursiveList let-tips="tips">
    <ul>
      <li *ngFor="let tip of tips">
        <ng-container *ngIf="tip.code; else normalTip">
          <div [innerHTML]="tip.text"></div>
          <div class="doc-example">
            <pre><code class="language-sql">{{ tip.code }}</code></pre>
          </div>
        </ng-container>
        <ng-template #normalTip>
          <div [innerHTML]="tip.text"></div>
        </ng-template>
        <ng-container *ngIf="tip.children?.length">
          <ng-container *ngTemplateOutlet="recursiveList; context:{ tips: tip.children }"></ng-container>
        </ng-container>
      </li>
    </ul>
  </ng-template>
  

  <section class="doc-section" *ngIf="docContent.relatedFormulas?.length">
    <h2 *ngIf="(docContent.relatedFormulas?.length || 0) === 1">Related Formula</h2>
    <h2 *ngIf="(docContent.relatedFormulas?.length || 0) > 1">Related Formulas</h2>
    <ul>
      <li *ngFor="let formula of docContent.relatedFormulas">
        <a routerLink="/docs/{{ formula | lowercase }}">{{ formula }}</a>
      </li>
    </ul>
  </section>
</div>
